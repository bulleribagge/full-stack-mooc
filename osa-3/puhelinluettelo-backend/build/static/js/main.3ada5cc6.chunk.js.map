{"version":3,"sources":["components/personsList.js","components/personForm.js","components/filter.js","components/notification.js","personService.js","App.js","index.js"],"names":["PersonsList","_ref","list","deletePerson","react_default","a","createElement","map","person","key","name","number","type","onClick","Object","objectSpread","PersonForm","addPerson","newName","setNewName","newNumber","setNewNumber","onSubmit","value","onChange","event","target","Filter","filter","setFilter","Notification","notification","className","success","message","getAllPersons","axios","get","then","response","data","App","_useState","useState","_useState2","slicedToArray","persons","setPersons","_useState3","_useState4","_useState5","_useState6","_useState7","_useState8","_useState9","_useState10","setNotification","useEffect","notifyWithTimeout","setTimeout","filteredList","toLowerCase","includes","components_notification","components_filter","personForm","ev","preventDefault","p","window","confirm","concat","existing","find","put","id","catch","errorMsg","post","err","errorData","error","personsList","_ref2","delete","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.3ada5cc6.chunk.js","sourcesContent":["import React from 'react'\n\nconst PersonsList = ({list, deletePerson}) => <div>{list.map(person => <p key={person.name}>{person.name} {person.number} <button type=\"button\" onClick={() => deletePerson({...person})}>poista</button></p>)}</div>\n\nexport default PersonsList","import React from 'react'\n\nconst PersonForm = ({addPerson, newName, setNewName, newNumber, setNewNumber}) =>\n  <form onSubmit={addPerson}>\n    <div>nimi: <input value={newName} onChange={(event) => setNewName(event.target.value)}/></div>\n    <div>numero: <input value={newNumber} onChange={(event) => setNewNumber(event.target.value)}/></div>\n    <div>\n      <button type=\"submit\">lisää</button>\n    </div>\n  </form>\n\nexport default PersonForm","import React from 'react'\n\nconst Filter = ({filter, setFilter}) => <div>Rajaa näytettäviä: <input value={filter} onChange={(event) => setFilter(event.target.value)}/></div>\n\nexport default Filter","import React from 'react'\n\nimport '../notification.css'\n\nconst Notification = ({notification}) => {\n  if ('success' in notification) {\n      return <div className={notification.success ? 'success' : 'error'}>{notification.message}</div>\n  }\n  return <div />\n}\n\nexport default Notification","import axios from 'axios'\n\nconst getAllPersons = () => axios.get('/api/persons').then(response => response.data)\n\nconst addPerson = (data) => axios.post('/api/persons', data).then(response => response.data)\n\nconst deletePerson = (id) => axios.delete(`/api/persons/${id}`).then(response => response.data)\n\nconst updatePerson = (data) => axios.put(`/api/persons/${data.id}`, data).then(response => response.data)\n\nexport { getAllPersons, addPerson, deletePerson, updatePerson }","import React, { useState, useEffect } from 'react'\nimport PersonsList from './components/personsList.js'\nimport PersonForm from './components/personForm.js'\nimport Filter from './components/filter.js'\nimport Notification from './components/notification.js'\n\nimport { getAllPersons, addPerson, deletePerson, updatePerson } from './personService.js'\n\nconst App = () => {\n  const [ persons, setPersons] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ filter, setFilter ] = useState('')\n  const [ notification, setNotification ] = useState({})\n\n  useEffect(() => {\n    getAllPersons().then(persons => setPersons(persons))\n  }, [])\n\n  const notifyWithTimeout = (message, success) => {\n    setNotification({message, success})\n    setTimeout(() => {\n      setNotification({})\n    }, 3000)\n  }\n\n  const doAddPerson = (ev) => {\n    ev.preventDefault()\n    if(persons.map(p => p.name).includes(newName)) {\n      if (window.confirm(`${newName} on jo luettelossa, korvataanko vanha numero uudella?`)) {\n        const existing = persons.find(p => p.name.includes(newName))\n        updatePerson({...existing, number: newNumber})\n        .then(() => getAllPersons())\n        .then(persons => setPersons(persons))\n        .then(() => notifyWithTimeout(`Päivitettiin henkilön ${newName} puhelinnumero`, true))\n        .catch(({ errorMsg }) => notifyWithTimeout(errorMsg, false))\n      }\n    } else {\n      const newPerson = {name: newName, number: newNumber}\n      addPerson(newPerson).then(() => getAllPersons())\n        .then(persons => setPersons(persons))\n        .then(() => notifyWithTimeout(`Lisättiin ${newName} puhelinluetteloon`, true))\n        .catch(err => {\n          const errorData = err.response.data.error\n          if (errorData) {\n            notifyWithTimeout(errorData, false)\n          } else {\n            notifyWithTimeout(err.message, false)\n          }\n        })\n    }\n  }\n\n  const byNamefilter = (person) => person.name.toLowerCase().includes(filter.toLowerCase())\n\n  const filteredList = persons.filter(byNamefilter)\n\n  const deleteWithConfirm = ({id, name}) => { \n    if (window.confirm(`Haluatko todella poistaa henkilön ${name}?`)) { \n        deletePerson(id)\n          .then(() => notifyWithTimeout(`Poistettiin ${name} puhelinluettelosta`, true))\n          .catch(() => notifyWithTimeout(`Henkilö ${name} oli jo poistettu`, false))\n        // It is assumed that in case of an error the person was already removed (in another session);\n        // thus, we filter out the person regardless of response code.\n        setPersons(persons.filter(p => p.id !== id))\n      }\n    }\n\n  return (\n    <div>\n      <h2>Puhelinluettelo</h2>\n      <Notification notification={notification} />\n      <Filter filter={filter} setFilter={setFilter} />\n      <h3>Lisää uusi</h3>\n      <PersonForm addPerson={doAddPerson} newName={newName} setNewName={setNewName} newNumber={newNumber} setNewNumber={setNewNumber} />\n      <h2>Numerot</h2>\n      <PersonsList list={filteredList} deletePerson={deleteWithConfirm}/>\n    </div>\n  )\n\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}